{
	frankenphp
}

:80 {
	root * /var/www/html/public
	encode zstd gzip

	header {
		X-Content-Type-Options "nosniff"
		X-Frame-Options "DENY"
		X-XSS-Protection "1; mode=block"
		Referrer-Policy "strict-origin-when-cross-origin"
		-Server
		-X-Powered-By
	}

	@static {
		file
		path *.ico *.css *.js *.gif *.jpg *.jpeg *.png *.svg *.woff *.woff2 *.ttf *.eot *.webp *.avif *.map
	}
	handle @static {
		header Cache-Control "public, max-age=31536000, immutable"
		file_server
	}

	@api path /api/*
	handle @api {
		header Cache-Control "no-cache, no-store, must-revalidate"
		header Pragma "no-cache"
		php_server
	}
	
	@blocked {
		path *.env* */.* */composer.* */package*.json
	}
	respond @blocked 404
	
	handle {
		php_server
	}
}